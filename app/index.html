<!doctype html>
<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<html lang="en">

    <head>
        <meta charset="utf-8">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="generator" content="Polymer Starter Kit">
        <title>FlavonTeam</title>

        <!-- Place favicon.ico in the `app/` directory -->

        <!-- Chrome for Android theme color -->
        <meta name="theme-color" content="#2E3AA1">

        <!-- Web Application Manifest -->
        <link rel="manifest" href="manifest.json">

        <!-- Tile color for Win8 -->
        <meta name="msapplication-TileColor" content="#3372DF">

        <!-- Add to homescreen for Chrome on Android -->
        <meta name="mobile-web-app-capable" content="yes">
        <meta name="application-name" content="PSK">
        <link rel="icon" sizes="192x192" href="images/touch/chrome-touch-icon-192x192.png">

        <!-- Add to homescreen for Safari on iOS -->
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <meta name="apple-mobile-web-app-title" content="Polymer Starter Kit">
        <link rel="apple-touch-icon" href="images/touch/apple-touch-icon.png">

        <!-- Tile icon for Win8 (144x144) -->
        <meta name="msapplication-TileImage" content="images/touch/ms-touch-icon-144x144-precomposed.png">

        <!-- build:css styles/main.css -->
        <link rel="stylesheet" href="styles/main.css">
        <!-- endbuild-->

        <!-- build:js bower_components/webcomponentsjs/webcomponents-lite.min.js -->
        <script src="bower_components/webcomponentsjs/webcomponents-lite.js"></script>
        <!-- endbuild -->

        <!-- Because this project uses vulcanize this should be your only html import
             in this file. All other imports should go in elements.html -->
        <link rel="import" href="elements/elements.html">

        <!-- For shared styles, shared-styles.html import in elements.html -->
        <style is="custom-style" include="shared-styles"></style>
    </head>

    <body unresolved>
        <!-- build:remove -->
        <span id="browser-sync-binding"></span>
        <!-- endbuild -->

        <template is="dom-bind" id="app">

            <iron-ajax 
                id="login" 
                on-response="sessionInfoHandler" 
                on-error="sessionInitializationErrorHandler" 
                url="{{backEndUrl}}authentication/session?token={{sessionInfo.token}}"
                last-response="{{sessionInfo}}"
                auto>
            </iron-ajax>
            <paper-dialog id="loginDialog" modal>
                <h2>Sign-in</h2>
                <signin-view base-url="{{backEndUrl}}"></signin-view>
            </paper-dialog>
            <paper-dialog id="registrationDialog" modal>
                <h2>Sign-on</h2>
                <signon-view base-url="{{backEndUrl}}"></signon-view>
            </paper-dialog>

            <paper-drawer-panel id="paperDrawerPanel" responsive-width="840px">
                <!-- Drawer Scroll Header Panel -->
                <paper-scroll-header-panel drawer fixed>

                    <!-- Drawer Toolbar -->
                    <paper-toolbar id="drawerToolbar">
                        <span id="mainMenuTitle" class="menu-name">Menu</span>
                    </paper-toolbar>

                    <!-- Drawer Content -->
                    <paper-menu class="app-menu" attr-for-selected="data-route" selected="[[route]]">
                        <a hidden="[[!sessionInfo]]" data-route="share-content" href="{{baseUrl}}share-content">
                            <iron-icon icon="send"></iron-icon>
                            <span id="shareContentMenuTitle">Share content</span>
                        </a>

                        <a hidden="[[!sessionInfo]]" data-route="content-tree" href="{{baseUrl}}content-tree/ROOT">
                            <iron-icon icon="mail"></iron-icon>
                            <span id="contentsMenuTitle">Contents</span>
                        </a>

                        <a  hidden="[[!sessionInfo]]" data-route="network" href="{{baseUrl}}network/[[sessionInfo.token]]">
                            <iron-icon icon="supervisor-account"></iron-icon>
                            <span id="networkMenuTitle">Network</span>
                        </a>

                        <a data-route="about" href="{{baseUrl}}about">
                            <iron-icon icon="info"></iron-icon>
                            <span id="aboutMenuTitle">About</span>
                        </a>
                    </paper-menu>
                </paper-scroll-header-panel>

                <!-- Main Area -->
                <paper-scroll-header-panel main id="headerPanelMain" condenses keep-condensed-header>
                    <!-- Main Toolbar -->
                    <paper-toolbar id="mainToolbar" class="tall">
                        <paper-icon-button id="paperToggle" icon="menu" paper-drawer-toggle></paper-icon-button>

                        <span class="space"></span>

                        <!-- Application name -->
                        <div class="middle middle-container">
                            <div class="app-name">[[applicationTitle]]</div>
                        </div>

                        <!-- Toolbar icons -->
                        <div hidden="[[!sessionInfo]]">
                            <paper-button on-click="showUserNavigation">
                                <iron-icon icon="account-circle"></iron-icon>
                                <span>{{sessionInfo.userName}}</span>
                            </paper-button>
                            <iron-dropdown id="userNavigation" horizontal-align="right" vertical-align="top">

                                <!--<paper-material class="dropdown-content">-->
                                <paper-menu attr-for-selected="data-route" selected="[[route]]" class="dropdown-content">
                                    <a data-route="profile" href="{{baseUrl}}profile">
                                        <iron-icon icon="account-circle"></iron-icon>
                                        <span id="profileMenuTitle">Profile</span>
                                    </a>
                                    <a data-route="signout" href="{{baseUrl}}signout">
                                        <iron-icon icon="markunread-mailbox"></iron-icon>
                                        <span id="logoutButtonLabel">Logout</span>
                                    </a>
                                </paper-menu>
                            </iron-dropdown>
                        </div>

                        <!-- Application sub title -->
                        <div class="bottom bottom-container">
                            <div class="bottom-title">The future of the web today</div>
                        </div>
                    </paper-toolbar>

                    <!-- Main Content -->
                    <div class="content">
                        <iron-pages attr-for-selected="data-route" selected="{{route}}">
                            <section data-route="profile">
                                <!--<paper-material elevation="1">-->
                                    <h2 id="shareContentViewTitleLabel" class="page-title focus-target" tabindex="-1">Profile</h2>
                                    <profile-view account-id="{{sessionInfo.token}}" base-url="{{backEndUrl}}"></profile-view>
                                <!--</paper-material>-->
                            </section>

                            <section data-route="share-content">
                                <!--<paper-material elevation="1">-->
                                    <h2 id="shareContentViewTitleLabel" class="page-title focus-target" tabindex="-1">Share content</h2>
                                    <share-content-view account-id="{{sessionInfo.token}}"></share-content-view>
                                <!--</paper-material>-->
                            </section>
                            <section data-route="content-tree">
                                <!--<paper-material elevation="1">-->
                                    <h2 id="contentTreeViewTitleLabel" class="page-title focus-target" tabindex="-1">Contents</h2>
                                    <content-tree-view 
                                        selected-root="[[params.contentId]]" 
                                        base-url="/" 
                                        api-url="{{backEndUrl}}"></content-tree-view>
                                <!--</paper-material>-->
                            </section>
                            <section data-route="network">
                                <!--<paper-material elevation="1">-->
                                    <h2 id="networkViewTitleLabel" class="page-title focus-target" tabindex="-1">Network</h2>
                                    <network-view account-id="[[params.memberId]]"></network-view>
                                <!--</paper-material>-->
                            </section>

                            <section data-route="about">
                                <paper-material elevation="1">
                                    <h2 id="aboutViewTitleLabel" class="page-title focus-target" tabindex="-1">About</h2>
                                    <about-view></about-view>
                                </paper-material>
                            </section>
                        </iron-pages>
                    </div>
                </paper-scroll-header-panel>
            </paper-drawer-panel>

            <paper-toast id="toast">
                <span class="toast-hide-button" role="button" tabindex="0" onclick="app.$.toast.hide()">Ok</span>
            </paper-toast>

            <!-- Uncomment next block to enable Service Worker support (1/2) -->
            <!--
            <paper-toast id="caching-complete"
                         duration="6000"
                         text="Caching complete! This app will work offline.">
            </paper-toast>
        
            <platinum-sw-register auto-register
                                  clients-claim
                                  skip-waiting
                                  base-uri="bower_components/platinum-sw/bootstrap"
                                  on-service-worker-installed="displayInstalledToast">
              <platinum-sw-cache default-cache-strategy="fastest"
                                 cache-config-file="cache-config.json">
              </platinum-sw-cache>
            </platinum-sw-register>
            -->

        </template>

        <!-- build:js scripts/app.js -->
        <script src="scripts/app.js"></script>
        <!-- endbuild-->
    </body>

</html>
