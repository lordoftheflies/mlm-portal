<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/iron-selector/iron-selector.html">
<link rel="import" href="../../bower_components/iron-list/iron-list.html">
<link rel="import" href="../../bower_components/paper-card/paper-card.html">
<link rel="import" href="../../bower_components/paper-item/paper-item.html">
<!--<link rel="import" href="../../bower_components/plutonium-cm-form/plutonium-cm-section.html">-->

<link rel="import" href="../../bower_components/i18n-behavior/i18n-behavior.html">

<dom-module id="content-viewer">
    <template>
        <style include="shared-styles">
            :host {
                display: block;
                /*@apply(--layout-horizontal);*/
            }

            :host a{ 
                text-decoration: none;
                color: var(--primary-text-color);
            }

            :host paper-material {
                background-color: white;
                /*height: 40px;*/
                /*@apply(--layout-center);*/
                /*@apply(--layout-horizontal);*/
                margin-top: 16px;
                padding: 20px;
            }
            
            :host paper-card {
                margin-top: 16px;
            }
        </style>
        <!--<template is="dom-if" if="{{!data.leaf}}">-->
        <!--<paper-card heading$="{{title}}">-->
        <!--<div class="card-content">-->
        <div hidden="[[data.leaf]]">Content tree</div>
        <iron-list items="{{data.sections}}" as="section"  hidden="[[data.leaf]]">
            <template>

                <!--                <paper-material elevation="1" tabindex="[[tabIndex]]"
                                                >-->

                <!--<div class="item" tabindex="[[tabIndex]]">-->
                <div >
                    <paper-material elevation="1" 
                                    href="{{section.name}}" 
                                    on-tap="onNavigate" 
                                    hidden="[[!section.hasEmbeddedFile]]" 
                                    id="articleTitleLabel" 
                                    class="item"
                                    title="Navigate to {{baseUrl}}content-tree/{{section.data}}">
                        <span>[[section.title]]</span>
                    </paper-material>

                    <paper-material elevation="1"
                                    href="{{section.data}}" 
                                    on-tap="onNavigate" 
                                    hidden="[[section.hasEmbeddedFile]]" 
                                    id="articleTitleLabel"
                                    class="item"
                                    title="Navigate to {{baseUrl}}content-tree/{{section.data}}">
                        <span>[[section.title]]</span>
                    </paper-material>
                </div>
                <!--</div>-->

                <!--</paper-material>-->
            </template>
        </iron-list>
        <!--</div>-->
        <!--</paper-card>-->
        <!---->
        <!--</template>-->
        <!--<template is="dom-if" if="{{data.leaf}}">-->
        <paper-card heading="{{data.title}}" hidden="{{!data.leaf}}">
            Content Viewer
            <plutonium-cm-section id="contentDisplay" class="card-content"  content-model="{{data}}">
            </plutonium-cm-section>
        </paper-card>
        <!--</template>-->

    </template>
    <script>
        (function () {
            'use strict';

            Polymer({
                is: 'content-viewer',
                behaviors: [PlutoniumBehaviors.WidgetBehavior],
                properties: {
                    data: {
                        type: Object,
                        notify: true
                    },
                    title: {
                        type: String,
                        notify: true
                    }
                },
                observer: [
                    'computeTitle(data.title)'
                ],
                computeTitle: function (data) {
                    this.title = data.title;
                },
                onNavigate: function (event, details) {
                    page.redirect(app.baseUrl + 'content-tree/' + details.sourceEvent.currentTarget.href);
                }
            });
        })();
    </script>
</dom-module>
